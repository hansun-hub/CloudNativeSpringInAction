
## 클라우드 네이티브 애플리케이션이란?
</br>
: 클라우드에서 실행되면서 변화에 탄력적으로 대응하고 고도로 분산되어 있는 시스템 </br>
시스템은 여러 개의 서비스로 구성- 이 서비스들은 네트워크를 통해 서로 통신 </br>
이 시스템은 끊임없이 변하는 동적 환경에 배포 </br>
</br>

클라우드 네이티브 - 클라우드 기술의 활용을 목표로 애플리케이션 개발 위한 접근방식 
</br>
</br>

## 1.1 클라우드 네이티브란 무엇인가?
폴 프리맨틀(클라우드 업계 베테랑) : 마이크로소프트, 도커, 데브옵스 이런 개념 존재 하지 않던 시기에 애플리케이션과 미들웨어가 클라우드 환경에서 잘 작동하기 위해 필요한 것</br>
: 클라우드 네이티브가 되기 위해 무엇이 필요한지 토의함</br>
</br>
1. 클라우드를 위해 특별히 설계되어야 함 </br>
2. 환경과 모델의 장점을 활용한 특성이 있어야 함</br>
</br>

## 1.1.1 클라우드 네이티브에서의 세 가지 P
클라우드를 위해 특별히 설계된다는 건?</br>
클라우드의 세 가지 P : 1. 플랫폼 2. 속성 3. 실행</br>
</br>
1. 플랫폼 : 클라우드 같은 동적 분산 환경을 기반으로 하는 플랫폼에서 실행됨</br>
2. 속성 : 확장 가능, 느슨 결합, 복원력 뛰어남, 관리 용이, 관찰 가능 </br>
3. 실행 : 견고한 자동화 통해 예측가능한 방식으로 시스템 변경 </br>
</br>

## 클라우드와 클라우드 컴퓨팅 모델 
실행되는 환경인 클라우드에 대해 설명할 것 </br>

클라우드는 컴퓨팅 자원을 소비자에게 제공하는 IT 인프라</br>
클라우드를 사용하는 기업 : 네트워크를 사용한 API를 통해 필요에 따라 리소스 제공/ 확장 가능한 온디맨드 서비스 통해 자원얻을 수 있음 </br>

=> 탄력성이 주요 특징 </br>

</br>
클라우드 서비스 제공위한 배포모델</br>

### 사설 클라우드 
: 한 단체나 조직에서만 사용하도록 제공하는 클라우드 인프라 </br>

### 공공 클라우드 
: 일반 사용자들에게 공공으로 제공되는 클라우드 인프라 </br>
- aws, Azure 등등

### 하이브리드 클라우드 
: 앞선 것들 중 클라우드 인프라 구성 몇개를 하나로 묶어 마치 하나의 단일 환경인 것처럼 서비스 제공</br>
</br>

클라우드 서비스 모델은 소비자에게 제공되는 기능으로 다섯가지로 나뉨</br>
- Iaas
- Caas
- Paas
- Faas
- Saas
Iaas -> Saas
이렇게 갈 수록 사용자의 책임이 줄어든다</br>
반면 플랫폼의 책임은 늘어난다. </br>
</br>

## 1.2.1 서비스형 인프라스트럭처 IaaS
IaaS모델에서 사용자는 서버, 스토리지, 및 네트워크와 같은 자원을 직접 제어 및 제공가능</br>
- AWS:EC2, Azure:virtual Machine
</br>

## 1.2.2 서비스형 컨테이너 CaaS
CaaS모델에서 사용자는 가상화를 위한 기본 리소스를 제어할 수 없고 대신 컨테이너를 만들고 관리함</br>
클라우드 공급자는 기본 리소스를 제공함: ex-새로운 가상머신을 만들고 인터넷 통한 액세스위해 네트워크 구성해줌</br>
컨테이너 플랫폼 구축위한 도구 : 도커, 쿠버네티스</br>
- Amazon Elastic Kubernetes Service EKS
</br>

## 1.2.3 서비스형 플랫폼 PaaS
클라우드 공급자가 인프라, 도구, API를 제공하고 개발자는 이를 사용해 애플리케이션을 빌드하고 배포함</br>
- ex: 개발자가 빌드 후 JAR 파일로 패키징 후, PaaS 모델로 실행되고 있는 플랫폼에 배포할 수 있음 </br>


## 1.2.4 서비스형 함수 FaaS
FaaS 모델의 서버리스 컴퓨팅을 사용하면 사용자는 함수의 형태로 비즈니스 로직을 구현하는 데만 집중할 수 있음</br>
플랫폼은 서버 및 나머지 인프라 제공</br>
서버리스 애플리케이션은?</br>
HTTP 요청이나 메시지 같은 이벤트 발생시 실행하게끔 할수 있음</br>
- ex: 어떤 데이터가 메시지 큐에 들어올 때마다 특정 알고리즘에 따라 결과를 계산하는 함수도 작성가능
- Amazon aws Lambda

## 1.2.5 서비스형 소프트웨어 SaaS
- 가장 추상화된 서비스
- 소비자는 사용자로서 애플리케이션에 액세스
- 클라우드 공급자는 소프트웨어 및 인프라 스택 전체 관리
- 많은 회사가 애플리케이션 만들고 CaaS 또는 PaaS 모델을 통해 실행 후 최종 고객에게 SaaS 형태로 판매함
- GitHub

</br>

## 클라우드 네이티브 애플리케이션의 특성
클라우드는 준비됨, 그 특성 활용 위해 애플리케이션을 어떻게 설계해야할지 보자</br>
- 확장성 : 워크로드의 증가 또는 감소를 동적지원
- 느슨한 결합 : 각각의 구성 요소들은 서로에 대해 최소한의 지식만 갖음
- 회복성 : 문제 직면 시 서비스 수준 유지
- 유지 보수성 : 외부에서의 제어 수준 : 갱신, 설정, 배포
- 관측 가능성 : 내부 상태에 대해 외부로부터 추정된 지식 

## 1.3.1 확장성 
클라우드 네이티브 애플리케이션은 확장 가능함</br>
: 추가 리소스를 제공해 증가하는 워크로드를 지원함 </br>
- 추가 리소스 특성에 따라 수직적 확장/ 수평적 확장
- 수직적 확장(위/아래 확장) : 하드웨어 리소스 추가(무한정 추가 불가,제한적 방식): 애플리케이션 설계시 명시 필요 없음
- 수평적 확장(확대/축소 확장) : 컴퓨팅 노드/ 컨테이너 추가( 제한없음): 애플리케이션 설계시 확장 가능해야함

전통적인 시스템 : 워크로드 증가 시 수직적 확장 채택(일반적)</br>
클라우드 : 수평적 확장 선호</br>
- 이는 클라우드 컴퓨팅 모델이 제공하는 추상화 수준 덕분에 가능</br>
</br>
클라우드는 탄력적임(리소스를 필요에 따라 늘리거나 줄이기 가능), 확장성은 탄력성을 갖추기 위한 전제 조건</br>
</br>


## 1.3.2 느슨한 결합
goal : 한 컴포넌트가 바뀐다고 해서 다른 부분까지 변경할 필요가 없음</br>
- 시스템을 모듈로 분해(모듈화)
- 의존성 최소화(느슨한 결합)
- 함께 변화하는 코드 캡슐화(높은 응집력)
=> 좋은 설계 방법</br>

파르나스의 모듈화 세가지 이점</br>
- 관리: 각 모듈의 팀들은 서로간의 조정, 의사소통에 많은 시간 할애x
- 제품 유연성 : 독립적으로 진화, 전체 시스템은 유연
- 이해력 : 전체를 이해할 필요 없고 하나의 모듈만 이해하고 작업가능


</br>
-> 마이크로서비스와 관련된 이점 </br>
분산된 모놀리스 : 밀접 결합된 시스템을 MSA로 변경하면 단단 결합된 MSA가 됨(이런것들이 존재함을 암시함-부적절)</br>
모듈식 모놀리스 : </br>

## 1.3.3 복원력
복원력 : 결함이나 환경변화 시에도 허용가능한 수준의 서비스 제공할 수 있도록 하는 기능</br>

클라우드 네이티브 시스템 </br>
구축시 목표 : </br>
장애 발생 시 언제나 사용가능하도록 보장하는 것 (가용성) </br>

우리의 마음가짐: </br>
동적환경에서 실행되는 특성상 결함을 사전에 막을 수 없음/ 변화는 예외적 상황 아닌 일어날 법칙 으로 생각</br>

세가지 필수 개념 :</br>
- 결함: 잘못된 내부 상태를 생성하는 원인 제공 장소 (ex 메서드호출, 널 아닌 반환값 넘겨야 함에도 널 값 반환하는 case)
- 오류: 예상 작동과 실제 작동 간의 불일치(ex 위 언급 결함으로 NullpointerException 발생 case)
- 실패: 결함 촉발 오류 발생 실패, 시스템 응답x , (ex nullException 적절하게 처리 x 실패 유발 시스템은 모든 요청에 500코드응답)

이에 애플리케이션은 내결함성(fault tolerant)을 갖게 설계필수</br>
복원력에서 필수적인 부분:</br>
- 실패 발생 시 다른 부분에 영향x
- 실패 발생 부분은 해결까지 격리 상태 유지

## 1.3.4 관측 가능성
외부 출력에서 내부 상태를 얼마나 잘 추론할 수 있는지 측정한 것</br>
외부 출력: 측정값, 로그, 트레이스(trace)와 같은 데이터</br>

관측 가능성의 네 가지 요소: </br>
- 모니터링: 애플리케이션의 전반적인 상태 정보 얻고 특정 양상 측정(ex Spring Boot Actuator:모니터링 기능, prometheus)
- 경고/시각화: 상태 수집 후 조치 취함, dashBoard 사용해 시각화 후 그래프 표시(ex Grafana 활용법)
- 인프라를 추적하는 분산 시스템: 분산 시스템에서는 모든 서버 내의 작동 뿐만 아니라 서로 다른 서버시스템 사이 데이터 추적 필수(ex OpenTelemetry와 Spring 통합, Grafana Tempo 사용해 트레이스 수집 및 시각화)
- 로그 집계/분석: 시스템 작동에 대한 저 나은 데이터 제공 및 분석(ex Fluent Bit, Loki, Grafana 사용해 로그 수집 및 시각화할 것)

## 1.3.5 관리 용이성
제어이론 : 관측 가능성 ~(대응) 제어 가능성</br>
제어 가능성 : 
- 외부 입력 통해 유한시간 내에 시스템 상태 또는 출력 변경하는 능력
> 이 개념은 관리 용이성으로 이어짐</br>










